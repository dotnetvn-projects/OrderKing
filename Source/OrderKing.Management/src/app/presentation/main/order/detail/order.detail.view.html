<section class="content-header">
  <app-bread-crumb [Title]="'Chi tiết đơn hàng'" [Root]="['Đơn hàng@(/don-hang)']" [Active]="'Chi tiết đơn hàng'"></app-bread-crumb>
</section>
<section class="invoice">
  <!-- title row -->
  <div class="row">
    <div class="col-xs-12">
      <h2 class="page-header">
        <i class="fa fa-globe"></i> {{OrderInfo.StoreName}}.
        <small class="pull-right"><i class="fa fa-calendar"></i> {{OrderInfo.CreatedDate}}</small>
      </h2>
    </div>
    <!-- /.col -->
  </div>
  <!-- info row -->
  <div class="row invoice-info">
    <div class="col-sm-4 invoice-col">
      <b>Mã đơn hàng {{ OrderInfo.OrderCode }}</b><br>
      <br>
      <b>Ngày tạo:</b> {{OrderInfo.CreatedDate}}<br>
      <b>Ngày cập nhật:</b> {{OrderInfo.UpdatedDate}}<br>
      <b>Nhân viên xử lý:</b> {{OrderInfo.Seller}}<br><br>
    </div>
    <div class="col-sm-4 invoice-col">
      <b>Ghi chú đơn hàng:</b><br><br>
      <textarea class="form-control" cols="35" rows="2">{{ OrderInfo.Comment }}</textarea>
    </div>
    <div class="col-sm-4 invoice-col order-status">
      <b>Trạng thái đơn hàng:</b><br><br>
      <select class="form-control" [(ngModel)]="OrderInfo.OrderStatus" (change)="statusSelectChange($event)" id="inputStatus" name="status">
        <option value="0">--- Trạng thái ---</option>
        <option value="1">Hoàn thành</option>
        <option value="3">Chưa xử lý</option>
        <option value="2">Hủy</option>
     </select>
    </div>
  </div>
  <!-- /.row -->

  <!-- Table row -->
  <div class="row">
    <div class="col-xs-12 table-responsive">
      <table class="table table-striped">
        <thead>
        <tr>
          <th>Mặt hàng</th>
          <th>Mã mặt hàng #</th>
          <th>Số lượng</th>
          <th>Đơn giá</th>
          <th>Thành tiền</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of OrderDetailList">
          <td>{{ item.ProductName }}</td>
          <td>{{ item.ProductCode }}</td>
          <td>{{ item.Amount }}</td>
          <td>{{ item.Price | currency:'VND':true }}</td>
          <td>{{ item.Total | currency:'VND':true }}</td>
        </tr>
        </tbody>
      </table>
    </div>
    <!-- /.col -->
  </div>
  <!-- /.row -->

  <div class="row">
    <!-- accepted payments column -->
    <div class="col-xs-6">
      <p class="lead">Phương thức thanh toán: <span class="small"><b>{{ OrderInfo.PaymentMethod }}</b></span></p>
      <img src="../../../../../assets/images/cash.png" alt="tiền mặt">
      <img src="../../../../../assets/images/atm.png" alt="Thẻ ATM">
      <img src="../../../../../assets/images/visa.png" alt="Visa">
      <img src="../../../../../assets/images/mastercard.png" alt="Mastercard">
      <img src="../../../../../assets/images/american-express.png" alt="American Express">
      <img src="../../../../../assets/images/paypal2.png" alt="Paypal">

      <p class="text-muted well well-sm no-shadow" style="margin-top: 10px;">
        Lưu ý giá tiền có thể thay đổi tùy thuộc vào chính sách cửa hàng như khuyến mãi hay voucher,
        Xem lòng sử dụng mục "Ghi chú đơn hàng" để xem chi tiết.
      </p>
    </div>
    <!-- /.col -->
    <div class="col-xs-6">
      <p class="lead">Ngày tạo {{OrderInfo.CreatedDate}}</p>

      <div class="table-responsive">
        <table class="table">
          <tbody>
          <tr>
            <th style="width:50%">Tổng Cộng:</th>
            <td>{{ OrderInfo.TotalPrice | currency:'VND':true }}</td>
          </tr>
        </tbody></table>
      </div>
    </div>
    <!-- /.col -->
  </div>
  <!-- /.row -->

  <!-- this row will not appear when printing -->
  <div class="row no-print">
    <div class="col-xs-12">
      <a [routerLink]="['/printer/in-don-hang', OrderInfo.Id]"  target="_blank" class="btn btn-default pull-right"><i class="fa fa-print"></i> In</a>
      <a [routerLink]="['/printer/in-don-hang/tao-pdf', OrderInfo.Id]" target="_blank" class="btn btn-primary pull-right" style="margin-right: 5px;">
        <i class="fa fa-download"></i> Tạo PDF
      </a>
      <button (click)="updateOrder()" style="margin-right: 5px;" class="pull-right btn btn-success"><i class="fa fa-edit"></i> Cập nhật</button>
    </div>
  </div>
</section>
